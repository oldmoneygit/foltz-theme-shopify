<!--
  Snippet: Product Info
  Descrição: Informações do produto (descrição, SKU, etc.) com design FOLTZ

  Uso:
  {% render 'product-info', product: product %}
-->

<style>
  .product-info {
    margin-top: 40px;
  }

  .product-info__section {
    margin-bottom: 32px;
  }

  .product-info__title {
    font-size: 1.25rem;
    font-weight: 700;
    color: #FFFFFF;
    margin-bottom: 16px;
  }

  .product-info__description {
    font-size: 1rem;
    color: var(--color-text-subdued);
    line-height: 1.8;
  }

  .product-info__description p {
    margin-bottom: 16px;
  }

  .product-info__description ul,
  .product-info__description ol {
    margin-left: 24px;
    margin-bottom: 16px;
  }

  .product-info__description li {
    margin-bottom: 8px;
  }

  .product-info__meta {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .product-info__meta-item {
    display: flex;
    gap: 12px;
    align-items: flex-start;
  }

  .product-info__meta-label {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--color-text-subdued);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    min-width: 80px;
  }

  .product-info__meta-value {
    font-size: 0.875rem;
    color: #FFFFFF;
  }

  .product-info__tags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }

  .product-info__tag {
    padding: 6px 12px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 16px;
    color: #FFFFFF;
    font-size: 0.75rem;
    font-weight: 500;
    transition: all 0.3s ease;
  }

  .product-info__tag:hover {
    border-color: var(--color-brand-yellow);
    color: var(--color-brand-yellow);
  }

  .product-info__accordion {
    border-top: 1px solid rgba(255, 255, 255, 0.1);
  }

  .product-info__accordion-item {
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }

  .product-info__accordion-header {
    width: 100%;
    padding: 20px 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: none;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .product-info__accordion-header:hover {
    color: var(--color-brand-yellow);
  }

  .product-info__accordion-title {
    font-size: 1rem;
    font-weight: 600;
    color: #FFFFFF;
    text-align: left;
    transition: color 0.3s ease;
  }

  .product-info__accordion-header:hover .product-info__accordion-title {
    color: var(--color-brand-yellow);
  }

  .product-info__accordion-icon {
    width: 24px;
    height: 24px;
    color: var(--color-text-subdued);
    transition: transform 0.3s ease;
  }

  .product-info__accordion-header[aria-expanded="true"] .product-info__accordion-icon {
    transform: rotate(180deg);
  }

  .product-info__accordion-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
  }

  .product-info__accordion-content.active {
    max-height: 1000px;
  }

  .product-info__accordion-body {
    padding-bottom: 20px;
    color: var(--color-text-subdued);
    font-size: 0.875rem;
    line-height: 1.6;
  }

  .product-info__share {
    display: flex;
    gap: 12px;
    align-items: center;
  }

  .product-info__share-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    color: #FFFFFF;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .product-info__share-btn:hover {
    background: rgba(218, 241, 13, 0.1);
    border-color: var(--color-brand-yellow);
    color: var(--color-brand-yellow);
  }
</style>

<div class="product-info">
  {%- if product.description != blank -%}
    <div class="product-info__section">
      <h2 class="product-info__title">{{ 'products.product.description' | t }}</h2>
      <div class="product-info__description">
        {{ product.description }}
      </div>
    </div>
  {%- endif -%}

  <div class="product-info__section">
    <h2 class="product-info__title">{{ 'products.product.details' | t }}</h2>
    <div class="product-info__meta">
      {%- assign current_variant = product.selected_or_first_available_variant -%}

      {%- if current_variant.sku != blank -%}
        <div class="product-info__meta-item">
          <span class="product-info__meta-label">{{ 'products.product.sku' | t }}:</span>
          <span class="product-info__meta-value" data-sku>{{ current_variant.sku }}</span>
        </div>
      {%- endif -%}

      {%- if product.vendor != blank -%}
        <div class="product-info__meta-item">
          <span class="product-info__meta-label">{{ 'products.product.vendor' | t }}:</span>
          <span class="product-info__meta-value">{{ product.vendor }}</span>
        </div>
      {%- endif -%}

      {%- if product.type != blank -%}
        <div class="product-info__meta-item">
          <span class="product-info__meta-label">{{ 'products.product.type' | t }}:</span>
          <span class="product-info__meta-value">{{ product.type }}</span>
        </div>
      {%- endif -%}

      <div class="product-info__meta-item">
        <span class="product-info__meta-label">{{ 'products.product.availability' | t }}:</span>
        <span class="product-info__meta-value" data-availability>
          {%- if current_variant.available -%}
            {{ 'products.product.in_stock' | t }}
          {%- else -%}
            {{ 'products.product.out_of_stock' | t }}
          {%- endif -%}
        </span>
      </div>
    </div>
  </div>

  {%- if product.tags.size > 0 -%}
    <div class="product-info__section">
      <h2 class="product-info__title">{{ 'products.product.tags' | t }}</h2>
      <div class="product-info__tags">
        {%- for tag in product.tags -%}
          <a href="{{ routes.collections_url }}/all/{{ tag | handle }}" class="product-info__tag">
            {{ tag }}
          </a>
        {%- endfor -%}
      </div>
    </div>
  {%- endif -%}

  <div class="product-info__accordion">
    <div class="product-info__accordion-item">
      <button
        class="product-info__accordion-header"
        aria-expanded="false"
        data-accordion-btn
      >
        <span class="product-info__accordion-title">{{ 'products.product.shipping' | t }}</span>
        <svg class="product-info__accordion-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </button>
      <div class="product-info__accordion-content" data-accordion-content>
        <div class="product-info__accordion-body">
          {{ 'products.product.shipping_info' | t }}
        </div>
      </div>
    </div>

    <div class="product-info__accordion-item">
      <button
        class="product-info__accordion-header"
        aria-expanded="false"
        data-accordion-btn
      >
        <span class="product-info__accordion-title">{{ 'products.product.returns' | t }}</span>
        <svg class="product-info__accordion-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </button>
      <div class="product-info__accordion-content" data-accordion-content>
        <div class="product-info__accordion-body">
          {{ 'products.product.returns_info' | t }}
        </div>
      </div>
    </div>
  </div>

  <div class="product-info__section">
    <h2 class="product-info__title">{{ 'products.product.share' | t }}</h2>
    <div class="product-info__share">
      <button class="product-info__share-btn" data-share="facebook">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
        </svg>
      </button>
      <button class="product-info__share-btn" data-share="twitter">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
        </svg>
      </button>
      <button class="product-info__share-btn" data-share="pinterest">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <circle cx="12" cy="12" r="10"></circle>
          <path d="M8.81 15.12a6.15 6.15 0 0 1-.34-2.12 6.12 6.12 0 0 1 6.1-6.1 5.19 5.19 0 0 1 4.86 3.39 5.21 5.21 0 0 1-2.34 6.76 3.52 3.52 0 0 1-1.95.57c-.86 0-1.67-.52-1.95-1.33l-.52 2a9.25 9.25 0 0 1-1.43 2.81"></path>
        </svg>
      </button>
    </div>
  </div>
</div>

<script>
  (function() {
    // Accordion
    const accordionBtns = document.querySelectorAll('[data-accordion-btn]');
    accordionBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const content = btn.nextElementSibling;
        const isExpanded = btn.getAttribute('aria-expanded') === 'true';

        btn.setAttribute('aria-expanded', !isExpanded);
        content.classList.toggle('active');
      });
    });

    // Social sharing
    const shareButtons = document.querySelectorAll('[data-share]');
    shareButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const platform = btn.dataset.share;
        const url = encodeURIComponent(window.location.href);
        const title = encodeURIComponent(document.title);

        let shareUrl = '';
        switch (platform) {
          case 'facebook':
            shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${url}`;
            break;
          case 'twitter':
            shareUrl = `https://twitter.com/intent/tweet?url=${url}&text=${title}`;
            break;
          case 'pinterest':
            shareUrl = `https://pinterest.com/pin/create/button/?url=${url}&description=${title}`;
            break;
        }

        if (shareUrl) {
          window.open(shareUrl, '_blank', 'width=600,height=400');
        }
      });
    });

    // Listen for variant changes
    document.addEventListener('variant:change', (e) => {
      const variant = e.detail.variant;
      if (!variant) return;

      // Update SKU
      const skuElement = document.querySelector('[data-sku]');
      if (skuElement && variant.sku) {
        skuElement.textContent = variant.sku;
      }

      // Update availability
      const availabilityElement = document.querySelector('[data-availability]');
      if (availabilityElement) {
        availabilityElement.textContent = variant.available
          ? '{{ 'products.product.in_stock' | t }}'
          : '{{ 'products.product.out_of_stock' | t }}';
      }
    });
  })();
</script>
